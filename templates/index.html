<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SystÃ¨me de DÃ©tection d'Intrusions IoT</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #333;
      min-height: 100vh;
    }

    .container {
      max-width: 1200px;
      margin: auto;
      padding: 20px;
      background: white;
      margin-top: 20px;
      margin-bottom: 20px;
      border-radius: 15px;
      box-shadow: 0 15px 35px rgba(0,0,0,0.1);
    }

    h1, h2, h3, h4 {
      color: #0056b3;
    }

    h1 {
      text-align: center;
      margin-bottom: 10px;
      font-size: 2.5em;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }

    .control-panel {
      background: linear-gradient(135deg, #667eea, #764ba2);
      padding: 25px;
      border-radius: 12px;
      text-align: center;
      margin: 30px 0;
      color: white;
    }

    .start-btn {
      background: #28a745;
      color: white;
      border: none;
      padding: 15px 30px;
      font-size: 18px;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
    }

    .start-btn:hover {
      background: #218838;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(40, 167, 69, 0.4);
    }

    .start-btn:disabled {
      background: #6c757d;
      cursor: not-allowed;
      transform: none;
    }

    .note, .analysis, .objectives, footer {
      background: #f8f9fa;
      padding: 20px;
      margin: 25px 0;
      border-left: 5px solid #007bff;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }

    .results-section {
      background: linear-gradient(135deg, #e3f2fd, #f3e5f5);
      padding: 25px;
      border-radius: 12px;
      margin: 25px 0;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
      background: white;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }

    th, td {
      padding: 15px;
      border: 1px solid #dee2e6;
      text-align: left;
    }

    th {
      background: linear-gradient(135deg, #007bff, #0056b3);
      color: white;
      font-weight: bold;
    }

    tr:nth-child(even) {
      background: #f8f9fa;
    }

    tr:hover {
      background: #e3f2fd;
      transition: background 0.3s ease;
    }

    .graph {
      margin: 25px 0;
      text-align: center;
    }

    .graph img {
      max-width: 100%;
      border: 1px solid #dee2e6;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      transition: transform 0.3s ease;
    }

    .graph img:hover {
      transform: scale(1.02);
    }

    ul, ol {
      margin-left: 20px;
      line-height: 1.8;
    }

    footer {
      text-align: center;
      font-size: 14px;
      border-top: 2px solid #007bff;
      
    }

    .loading {
      text-align: center;
      padding: 50px;
    }

    .loader {
      border: 4px solid #f3f3f3;
      border-top: 4px solid #007bff;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      animation: spin 1s linear infinite;
      margin: 20px auto;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .code-explanation {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 8px;
      border-left: 5px solid #28a745;
      margin: 20px 0;
    }

    .highlight {
      background: #fff3cd;
      padding: 3px 6px;
      border-radius: 4px;
      font-family: 'Courier New', monospace;
      font-weight: bold;
    }

    .step-box {
      background: linear-gradient(135deg, #e8f5e8, #f0f8ff);
      padding: 15px;
      margin: 10px 0;
      border-radius: 8px;
      border-left: 4px solid #28a745;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ” SystÃ¨me de DÃ©tection d'Intrusions IoT</h1>

    <div class="note">
      <strong>ğŸ“Š DÃ©tection automatique des cyber-attaques</strong><br>
      Utilisation de l'Intelligence Artificielle pour identifier les attaques Mirai et Gafgyt dans les rÃ©seaux d'objets connectÃ©s (IoT).
    </div>

    <!-- Panneau de contrÃ´le -->
    <div class="control-panel">
      <h2>ğŸš€ Lancement de l'Analyse</h2>
      <p>Cliquez sur le bouton ci-dessous pour dÃ©marrer l'entraÃ®nement des modÃ¨les IA</p>
      <button id="startBtn" class="start-btn" onclick="startProcessing()">
        â–¶ï¸ DÃ©marrer l'Analyse
      </button>
      <div id="status-message" style="margin-top: 15px; font-weight: bold;"></div>
    </div>

    <!-- Section des rÃ©sultats -->
    <div id="results-container" style="display: none;">
      <div class="results-section">
        <h2>ğŸ“ˆ RÃ©sultats des ModÃ¨les IA</h2>
        <table id="results-table">
          <thead>
            <tr>
              <th>ğŸ¤– ModÃ¨le</th>
              <th>ğŸ¯ PrÃ©cision</th>
              <th>ğŸ“Š Score F1</th>
            </tr>
          </thead>
          <tbody id="results-body">
          </tbody>
        </table>

        <h2>ğŸ“Š Visualisations des Performances</h2>
        <div class="graph">
          <h3>ğŸ“ˆ Comparaison de la PrÃ©cision</h3>
          <img src="/static/images/accuracy_comparison.png" alt="Comparaison PrÃ©cision">
        </div>
        
        <div class="graph">
          <h3>ğŸ¯ Comparaison du Score F1</h3>
          <img src="/static/images/f1_comparison.png" alt="Comparaison F1">
        </div>
        
        <div class="graph">
          <h3>ğŸ” Importance des CaractÃ©ristiques</h3>
          <img src="/static/images/feature_importance.png" alt="Importance Features">
        </div>
        
        <div class="graph">
          <h3>ğŸ“‹ Matrice de Confusion - Meilleur ModÃ¨le</h3>
          <img src="/static/images/all_confusion_matrices.png" alt="Matrice Confusion">
        </div>

        <h2>ğŸ” Matrices de Confusion DÃ©taillÃ©es</h2>
        <div class="graph">
          <h4>ğŸŒ² Random Forest</h4>
          <img src="/static/images/cm_Random_Forest.png" alt="Random Forest">
        </div>
        
        <div class="graph">
          <h4>âš¡ Random Forest OptimisÃ©</h4>
          <img src="/static/images/cm_Random_Forest_Optimise.png" alt="Random Forest OptimisÃ©">
        </div>
        
        <div class="graph">
          <h4>ğŸ’  SVM (Support Vector Machine)</h4>
          <img src="/static/images/cm_SVM.png" alt="SVM">
        </div>
        
        <div class="graph">
          <h4>ğŸ“‰ RÃ©gression Logistique</h4>
          <img src="/static/images/cm_Logistic_Regression.png" alt="Logistic Regression">
        </div>
      </div>
    </div>

    <!-- Contenu informatif toujours visible -->
    <div class="objectives">
      <h2>ğŸ¯ Objectif DÃ©taillÃ© du TP</h2>
      <p>
        Ce travail pratique vise Ã  dÃ©velopper un <strong>systÃ¨me intelligent de cybersÃ©curitÃ©</strong> capable de dÃ©tecter automatiquement les intrusions dans les rÃ©seaux IoT. Il s'agit d'une problÃ©matique cruciale car :
      </p>
      
      <div class="step-box">
        <h4>ğŸŒ Contexte des Objets ConnectÃ©s</h4>
        <p>Les objets connectÃ©s (IoT) sont partout : camÃ©ras de sÃ©curitÃ©, thermostats intelligents, rÃ©frigÃ©rateurs connectÃ©s, montres intelligentes, etc. Ces appareils sont souvent vulnÃ©rables car ils ont peu de sÃ©curitÃ© intÃ©grÃ©e.</p>
      </div>

      <div class="step-box">
        <h4>âš ï¸ Les Menaces CiblÃ©es</h4>
        <ul>
          <li><strong>Attaque Mirai</strong> : Transforme les appareils IoT en "zombies" pour crÃ©er des rÃ©seaux de machines compromises (botnets)</li>
          <li><strong>Attaque Gafgyt</strong> : Similaire Ã  Mirai, exploite les mots de passe par dÃ©faut des appareils IoT</li>
          <li><strong>Trafic Normal (Benign)</strong> : Communications lÃ©gitimes entre appareils</li>
        </ul>
      </div>

      <div class="step-box">
        <h4>ğŸ¤– Solution par Intelligence Artificielle</h4>
        <p>Nous utilisons des <strong>algorithmes de Machine Learning</strong> pour apprendre Ã  distinguer automatiquement le trafic normal des attaques en analysant les caractÃ©ristiques du trafic rÃ©seau.</p>
      </div>

      <h2>ğŸ“˜ ModÃ¨les IA UtilisÃ©s</h2>

      <div class="step-box">
        <h3>ğŸŒ² Random Forest (ForÃªt AlÃ©atoire)</h3>
        <p><strong>Principe :</strong> Combine plusieurs arbres de dÃ©cision pour prendre une dÃ©cision collective.</p>
        <p><strong>Avantages :</strong> TrÃ¨s efficace sur des donnÃ©es complexes, rÃ©sistant au surajustement.</p>
        <p><strong>Utilisation :</strong> Excellent pour la dÃ©tection d'intrusions car il peut capturer des patterns complexes.</p>
      </div>

      <div class="step-box">
        <h3>ğŸ’  SVM (Support Vector Machine)</h3>
        <p><strong>Principe :</strong> Trouve la meilleure frontiÃ¨re pour sÃ©parer les diffÃ©rentes classes de donnÃ©es.</p>
        <p><strong>Avantages :</strong> TrÃ¨s performant quand les donnÃ©es sont bien sÃ©parables.</p>
        <p><strong>Utilisation :</strong> IdÃ©al pour classifier les types d'attaques avec prÃ©cision.</p>
      </div>

      <div class="step-box">
        <h3>ğŸ“‰ RÃ©gression Logistique</h3>
        <p><strong>Principe :</strong> Utilise des probabilitÃ©s pour classifier les donnÃ©es.</p>
        <p><strong>Avantages :</strong> Simple, rapide et interprÃ©table.</p>
        <p><strong>Utilisation :</strong> Baseline efficace pour la dÃ©tection binaire (normal/attaque).</p>
      </div>

      <h2>âš™ï¸ Optimisation AvancÃ©e</h2>
      <div class="step-box">
        <p>Nous utilisons <span class="highlight">GridSearchCV</span> pour optimiser automatiquement les paramÃ¨tres du Random Forest :</p>
        <ul>
          <li><strong>n_estimators</strong> : Nombre d'arbres dans la forÃªt (100, 200, 300)</li>
          <li><strong>max_depth</strong> : Profondeur maximale des arbres (10, 15, 20)</li>
          <li><strong>min_samples_split</strong> : Minimum d'Ã©chantillons pour diviser un nÅ“ud (2, 5, 10)</li>
        </ul>
        <p>Cette optimisation permet d'amÃ©liorer significativement les performances du modÃ¨le.</p>
      </div>

      <h2>ğŸ” Ã‰tapes DÃ©taillÃ©es du Processus</h2>
      <ol>
        <li class="step-box"><strong>GÃ©nÃ©ration des DonnÃ©es</strong> : Simulation de 10,000 connexions IoT avec caractÃ©ristiques rÃ©alistes</li>
        <li class="step-box"><strong>Ã‰tiquetage Intelligent</strong> : Attribution des labels Benign (60%), Mirai (25%), Gafgyt (15%)</li>
        <li class="step-box"><strong>Injection d'Anomalies</strong> : Modification des donnÃ©es pour simuler les signatures d'attaques</li>
        <li class="step-box"><strong>PrÃ©traitement</strong> : Normalisation des donnÃ©es avec StandardScaler</li>
        <li class="step-box"><strong>Division Train/Test</strong> : 80% pour l'entraÃ®nement, 20% pour les tests</li>
        <li class="step-box"><strong>EntraÃ®nement Multi-ModÃ¨les</strong> : Formation parallÃ¨le des 3 algorithmes</li>
        <li class="step-box"><strong>Ã‰valuation ComplÃ¨te</strong> : Calcul de la prÃ©cision, F1-score, matrices de confusion</li>
        <li class="step-box"><strong>Optimisation</strong> : GridSearch sur le meilleur modÃ¨le</li>
        <li class="step-box"><strong>Visualisation</strong> : GÃ©nÃ©ration automatique des graphiques d'analyse</li>
      </ol>

      <h2>ğŸ”’ Impact sur la CybersÃ©curitÃ©</h2>
      <div class="step-box">
        <p>
          Les attaques comme <strong>Mirai</strong> ont dÃ©jÃ  compromis des millions d'appareils IoT, crÃ©ant des botnets capables de :
        </p>
        <ul>
          <li>ğŸ”´ Lancer des attaques DDoS massives</li>
          <li>ğŸ”´ Voler des donnÃ©es personnelles</li>
          <li>ğŸ”´ Espionner les utilisateurs</li>
          <li>ğŸ”´ Propager d'autres malwares</li>
        </ul>
        <p>
          Ce TP dÃ©montre comment l'<strong>IA peut automatiser la dÃ©tection</strong> de ces menaces en temps rÃ©el, 
          permettant une rÃ©ponse rapide et efficace.
        </p>
      </div>

     

      <div class="code-explanation">
        <h3>ğŸŒ Interface Web Flask</h3>
        <p>Architecture de l'application web :</p>
        <ul>
          <li><span class="highlight">@app.route("/")</span> : Page principale avec interface utilisateur</li>
          <li><span class="highlight">@app.route("/start_processing")</span> : Endpoint pour lancer l'analyse</li>
          <li><span class="highlight">@app.route("/status")</span> : VÃ©rification de l'Ã©tat du traitement</li>
          <li><span class="highlight">render_template()</span> : Rendu dynamique du HTML</li>
        </ul>
      </div>

    

      
    </div>

    <footer>
      <p><strong>ğŸ“ RÃ©alisÃ© dans le cadre du TP Machine Learning & CybersÃ©curitÃ© - DÃ©tection d'Intrusions IoT</strong></p>
      <p>ğŸ’¡ Ce projet dÃ©montre l'application concrÃ¨te de l'IA pour renforcer la cybersÃ©curitÃ© des objets connectÃ©s</p>
    </footer>
  </div>

  <script>
    let processing = false;

    function startProcessing() {
      if (processing) return;
      
      processing = true;
      const startBtn = document.getElementById('startBtn');
      const statusMsg = document.getElementById('status-message');
      
      startBtn.disabled = true;
      startBtn.innerHTML = 'â³ Traitement en cours...';
      statusMsg.innerHTML = 'ğŸ”„ EntraÃ®nement des modÃ¨les IA en cours...';
      
      // DÃ©marrer le traitement
      fetch('/start_processing')
        .then(response => response.json())
        .then(data => {
          if (data.status === 'completed') {
            // Afficher les rÃ©sultats
            displayResults(data.results);
            statusMsg.innerHTML = 'âœ… Analyse terminÃ©e avec succÃ¨s !';
            startBtn.innerHTML = 'âœ… Analyse TerminÃ©e';
            
            // Faire dÃ©filer vers les rÃ©sultats
            document.getElementById('results-container').scrollIntoView({ 
              behavior: 'smooth' 
            });
          }
        })
        .catch(error => {
          console.error('Erreur:', error);
          statusMsg.innerHTML = 'âŒ Erreur lors du traitement';
          startBtn.disabled = false;
          startBtn.innerHTML = 'â–¶ï¸ DÃ©marrer l\'Analyse';
          processing = false;
        });
    }

    function displayResults(results) {
      const container = document.getElementById('results-container');
      const tbody = document.getElementById('results-body');
      
      // Vider le tableau
      tbody.innerHTML = '';
      
      // Remplir avec les rÃ©sultats
      results.forEach(result => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td><strong>${result.Model}</strong></td>
          <td><span style="color: #28a745; font-weight: bold;">${(result.Accuracy * 100).toFixed(2)}%</span></td>
          <td><span style="color: #007bff; font-weight: bold;">${result['F1-Score'].toFixed(3)}</span></td>
        `;
        tbody.appendChild(row);
      });
      
      // Afficher la section des rÃ©sultats
      container.style.display = 'block';
    }

    // VÃ©rification pÃ©riodique du statut (optionnel)
    function checkStatus() {
      if (!processing) return;
      
      fetch('/status')
        .then(response => response.json())
        .then(data => {
          if (data.status === 'completed') {
            processing = false;
          }
        });
    }

    // VÃ©rifier le statut toutes les 2 secondes si en cours de traitement
    setInterval(checkStatus, 2000);
  </script>
</body>
</html>
